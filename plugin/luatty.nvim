local luatty = require('luatty')

vim.api.nvim_create_user_command('LuaTTYConnect', function(opts)
  local server_name, server_port, username = opts.args:match("^(%S+)%s+(%d+)%s+(%S+)$")
  server_port = tonumber(server_port)
  luatty.authorize(server_name, username, server_port)
end, { nargs = 3 })

vim.api.nvim_create_user_command('LuaTTYSend', function(opts)
  local message = opts.args
  luatty.send_message(message)
end, { nargs = 1 })

